1.	Динамическая маршрутизация. Алгоритмы динамической маршрутизации. Модель состояния канала
Динамическая маршрутизация  — это технология, при которой маршрутизаторы автоматически обмениваются информацией о состоянии сети и строят оптимальные пути передачи данных. Это позволяет сети адаптироваться к изменениям (например, сбоям или изменению нагрузки) без участия администратора. 
Алгоритмы динамической маршрутизации  
Существует несколько подходов к построению маршрутов: 
    Distance Vector (вектор расстояний)  – маршрутизатор знает только о соседях и расстоянии до целевых сетей.
    Link State (состояние канала)  – маршрутизатор собирает полную информацию обо всех соединениях в сети и строит карту топологии.
    Гибридный подход  – сочетает элементы первых двух методов.
Модель состояния канала (Link State)  
Это более сложный и точный алгоритм, чем Distance Vector. Основная идея заключается в том, что каждый маршрутизатор: 
    Получает информацию о состоянии своих непосредственных соседей.
    Создаёт специальный пакет — LSP (Link State Packet)  — который содержит данные о своих соседях и состоянии каналов связи.
    Распространяет этот пакет по всей сети, чтобы все маршрутизаторы имели одинаковое представление о топологии.
    Строит топологическую карту  сети.
    Использует алгоритм Дейкстры  для вычисления кратчайшего пути до каждой доступной сети.
Преимущества Link State: 
    Быстрая реакция на изменения в сети.
    Отсутствие маршрутных петль после сходимости.
    Высокая точность выбора маршрута благодаря полной информации о топологии.
Недостатки:  
    Требует больше ресурсов (памяти и процессора).
    Сложнее в реализации и настройке.
    Требует хорошей синхронизации между маршрутизаторами.
Примеры протоколов Link State: 
    OSPF (Open Shortest Path First)  – широко используется в корпоративных сетях.
    IS-IS (Intermediate System to Intermediate System)  – применяется у провайдеров и в крупных сетях.
2.	Сети VPN. Задачи. Принцип работы службы VPN
VPN (Virtual Private Network)  — это технология создания защищённого виртуального соединения поверх публичных сетей (например, Интернета). Она позволяет передавать данные безопасно, как если бы устройства находились в одной частной сети. 
Основные задачи VPN:  
    Обеспечение конфиденциальности  – шифрование данных предотвращает их прослушивание.
    Гарантия целостности  – защита от изменения данных при передаче.
    Аутентификация участников  – проверка подлинности клиентов и серверов.
    Обход ограничений  – скрытие реального IP-адреса и доступ к заблокированным ресурсам.
    Безопасное удалённое подключение  – доступ сотрудников к корпоративной сети из любой точки мира.
    Объединение филиалов  – создание единой безопасной сети между офисами.
Принцип работы службы VPN:  
    Туннелирование : 
        Данные инкапсулируются (упаковываются) в новый пакет с заголовком, понятным для общедоступной сети.
        Это позволяет скрыть исходный трафик от внешних наблюдателей.
    Шифрование : 
        Перед отправкой данные шифруются, чтобы сделать их недоступными для несанкционированного доступа.
        Используются алгоритмы шифрования, такие как AES , 3DES , RSA  и др.
    Аутентификация : 
        Проверяется подлинность клиента и сервера.
        Могут использоваться пароли, цифровые сертификаты или двухфакторная аутентификация.
    Маршрутизация через VPN-сервер : 
        Весь трафик пользователя направляется через защищённый туннель к VPN-серверу.
        Сервер расшифровывает данные и отправляет их в интернет от своего имени.
        Ответы от сайтов или сервисов также проходят через этот туннель обратно к пользователю.
Ключевые технологии и протоколы:  
    PPTP  – устаревший и небезопасный протокол.
    L2TP/IPsec  – более безопасный, часто используется с шифрованием.
    OpenVPN  – открытый протокол с высоким уровнем безопасности и гибкостью.
    IKEv2/IPsec  – стабильный выбор для мобильных устройств.
    WireGuard  – современный, простой и быстрый протокол.
Преимущества использования VPN:  
    Защита данных в публичных сетях (Wi-Fi, мобильный интернет).
    Анонимность в сети.
    Безопасное взаимодействие между филиалами и сотрудниками.
    Централизованное управление трафиком.
    Снижение затрат на выделенные каналы связи.
3.	Развернуть и настроить GRE-туннель между двумя маршрутизаторами. Настроить маршруты для корректной работы трафика.
(apt update –y)
(iptables –t nat –A POSTROUTING –j MASQUERADE)
(apt install iptables-persistent -y)
(перезагрузить пк что бы интернет встал на второй комп при подключении к нему + iptables –t nat –S для проверки стоит ли построутинг и маскарад)
Создаем в нмтуи ip tunnel mode gre
ДЛЯ HQ RTR
«Parent» указываем интерфейс в сторону ISP (ens3) · Задаём «Local IP» (IP на интерфейсе HQ-RTR в сторону ISP 172.16.4.2) · Задаём «Remote IP» (IP на интерфейсе BR-RTR в сторону ISP 172.16.5.2) · Переходим к «IPv4 CONFIGURATION», переключаем на «Manual» · Задаём адрес IPv4 для туннеля (10.10.0.1/30)
ДЛЯ BR RTR«Parent» указываем интерфейс в сторону ISP (ens3) · Задаём «Local IP» (IP на интерфейсе BR-RTR в сторону ISP 172.16.5.2) · Задаём «Remote IP» (IP на интерфейсе HQ-RTR в сторону ISP 172.16.4.2) · Переходим к «IPv4 CONFIGURATION», переключаем на «Manual» · Задаём адрес IPv4 для туннеля (10.10.0.2/30)
Для корректной работы протокола динамической маршрутизации требуется увеличить параметр TTL на интерфейсе туннеля (ОБЯЗАТЕЛЬНОЧТОБЫРАБОТАЛOSPF!!!): nmcli connection modify tun1 ip-tunnel.ttl 64
ping 10.10.0.2 на хк ртр
ping 10.10.0.1 на бр ртр
