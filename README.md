#!/bin/bash

# === Билеты с 1 по 20 ===

read -r -d '' BILET_1 << 'EOF'
ЭКЗАМЕНАЦИОННЫЙ БИЛЕТ № 1

1. Что такое домен?
Домен — это имя сайта . Все домены устроены иерархически: они состоят из частей (уровней). Домены третьего уровня создаются на базе доменов второго уровня, а домены второго уровня — на базе доменов первого. www.dayn.ru www – 3 уровень , dayn 2 уровень, ru 1 уровень.

2. Что называется виртуальной машиной? Компьютерные сети. Типы сетей передачи данных.
Виртуальной машиной (ВМ) называется программная эмуляция физического компьютера или сервера или оски андроеда и тд и поху, работающая на другом физическом компьютере.
Компьютерные сети классифицируются по разным критериям, в том числе по территориальному охвату, способу подключения, типу передачи данных и архитектуре. По территориальному охвату выделяют локальные (LAN), региональные (MAN), глобальные (WAN), кампусные (CAN), персональные (PAN) и нательные (BAN) сети, а также виртуальные частные сети (VPN). По способу подключения различают проводные и беспроводные сети.
По типу передачи данных выделяют аналоговые и цифровые сети, а также широковещательные и точки-точка. Аналоговые сети: Передают данные в виде непрерывного сигнала, например, телефонная сеть. Цифровые сети: Передают данные в виде дискретных сигналов (битов), например, компьютерные сети. Широковещательные сети: Передают данные для всех подключенных узлов. Точка-точка: Передают данные напрямую между двумя узлами.

3. Настроить имена устройств ISP, HQ-RTR, HQ-SRV, HQ-CLI, BR-RTR, BR-SRV (hostname)
sudo hostnamectl set-hostname dolbaeb
exec bash
EOF

read -r -d '' BILET_2 << 'EOF'
ЭКЗАМЕНАЦИОННЫЙ БИЛЕТ № 2

1. Трансляция сетевых адресов NAT. Назначение и основные виды NAT. Перегруженный NAT.
Трансляция сетевых адресов (NAT) – это технология, позволяющая устройствам в локальной сети использовать один или несколько публичных IP-адресов при выходе в интернет. Она позволяет экономить публичные IP-адреса и повышает безопасность сети. Существуют различные типы NAT, включая статическую, динамическую и перегруженную NAT (PAT)

Назначение и основные виды NAT:
Экономия IP-адресов: NAT решает проблему ограниченного количества публичных IP-адресов, позволяя нескольким устройствам в локальной сети использовать один общий адрес.
Повышение безопасности: NAT скрывает внутреннюю структуру сети от внешних пользователей, затрудняя несанкционированный доступ.
Статическая NAT (Static NAT): Отображает частные IP-адреса устройств в публичные IP-адреса один к одному.
Динамическая NAT (Dynamic NAT): Отображает частные IP-адреса в публичные IP-адреса, используя пул свободных публичных адресов.
Перегруженный NAT (PAT): Как работает: Перегруженный NAT отображает несколько частных IP-адресов и портов в один публичный IP-адрес и разные порты. Это позволяет эффективно использовать публичные IP-адреса, когда в локальной сети большое количество устройств, каждый из которых нуждается в доступе в интернет.

2. Основные функции сетевых адаптеров?
Основными функциями сетевых адаптеров являются: прием и передача данных между компьютером и сетью, преобразование данных в нужный формат для передачи по сети, кодирование и декодирование информации, контроль и управление потоком данных.

1. Передача и прием данных Сетевые адаптеры обеспечивают соединение между устройством и сетью, позволяя отправлять и получать данные по сети.
2. Кодирование и декодирование Адаптеры преобразуют данные из цифрового формата, понятного компьютеру, в формат, подходящий для передачи по сети, и обратно.
3. Управление доступом к сети Они контролируют, когда и как устройство может передавать данные, чтобы избежать конфликтов между несколькими устройствами в одной сети.
4. Обработка ошибок Сетевые адаптеры могут распознавать ошибки в переданных данных и запрашивать повторную передачу, обеспечивая целостность данных.
5. Фильтрация трафика Некоторые адаптеры могут фильтровать входящие и исходящие данные, что помогает защитить устройство от вредоносного трафика.
6. Подключение различных типов сетей Они позволяют устройствам работать в различных сетевых средах, будь то Ethernet, Wi-Fi и т. д.
7. Мосты и маршрутизация Некоторые адаптеры способны выполнять функции мостов или маршрутизаторов, контролируя потоки данных между различными подсетями.
8. Поддержка различных протоколов Адаптеры работают с различными сетевыми протоколами, такими как TCP/IP, что позволяет им взаимодействовать с множеством сетевых устройств и программ.

3. Настройте GRE-туннель
Создаем в нмтуи ip tunnel mode gre
ДЛЯ HQ RTR
«Parent» указываем интерфейс в сторону ISP (ens3). Задаём «Local IP» (IP на интерфейсе HQ-RTR в сторону ISP 172.16.4.2). Задаём «Remote IP» (IP на интерфейсе BR-RTR в сторону ISP 172.16.5.2). Переходим к «IPv4 CONFIGURATION», переключаем на «Manual». Задаём адрес IPv4 для туннеля (10.10.0.1/30)
ДЛЯ BR RTR
«Parent» указываем интерфейс в сторону ISP (ens3). Задаём «Local IP» (IP на интерфейсе BR-RTR в сторону ISP 172.16.5.2). Задаём «Remote IP» (IP на интерфейсе HQ-RTR в сторону ISP 172.16.4.2). Переходим к «IPv4 CONFIGURATION», переключаем на «Manual». Задаём адрес IPv4 для туннеля (10.10.0.2/30)
Для корректной работы протокола динамической маршрутизации требуется увеличить параметр TTL на интерфейсе туннеля (ОБЯЗАТЕЛЬНОЧТОБЫРАБОТАЛOSPF!!!): nmcli connection modify tun1 ip-tunnel.ttl 64
ping 10.10.0.2 на хк ртр
ping 10.10.0.1 на бр ртр
EOF

read -r -d '' BILET_3 << 'EOF'
ЭКЗАМЕНАЦИОННЫЙ БИЛЕТ № 3

1. Что такое дерево в Active Directory? Что такое маска подсети?
Дерево в Active Directory — это иерархическая структура, состоящая из одного или нескольких доменов, которые имеют общий корневой элемент.
Маска подсети — это числовое значение, которое используется в компьютерных сетях для разделения IP-адреса на две части: сеть и хост.

2. Чем отличается системная виртуальная машина от процессорной? Компьютерные сети. Типы сетей передачи данных.
Системная виртуальная машина обеспечивает полнофункциональную среду для работы операционной системы и нескольких процессов, относящихся к разным пользователям. Процессорная виртуальная машина — создает среду для выполнения пользовательских приложений.

3. Настройте динамическую конфигурацию IP-адресов для всех хостов, используя протокол DHCP.
apt install isc-dhcp-server
nano /etc/default/isc-dhcp-server
INTERFACESv4="vlan200"
nano /etc/dhcp/dhcpd.conf
option domain-name "au-team.irpo";
option domain-name-servers 192.168.100.2;
subnet 192.168.100.64 netmask 255.255.255.240 {
range 192.168.100.66 192.168.100.78;
option routers 192.168.100.65;
}
systemctl enable --now isc-dhcp-server
systemctl restart isc-dhcp-server
входим на нижний и ставим автоматическое подключение.
EOF

# ... (аналогично добавлены билеты 4–20 в полной версии)

read -r -d '' BILET_20 << 'EOF'
ЭКЗАМЕНАЦИОННЫЙ БИЛЕТ № 20

1. Как осуществить перенос данных на новый сервер? Перечислите основные типы виртуализаций. Для чего системный администратор производит отключение портов?
Перенос данных на новый сервер можно сделать через rsync, scp, tar+ssh, облачное хранилище, бэкапы и восстановление.

Основные типы виртуализаций:
- Аппаратная виртуализация (VMware, Hyper-V)
- Паравиртуализация (Xen)
- Гостевая виртуализация (Docker)
- Облачная виртуализация (AWS, Azure)

Системный администратор отключает порты:
- Для повышения безопасности
- Для контроля доступа
- Для снижения нагрузки
- Для изоляции сервисов

2. Какую команду следует использовать для вывода 25 последних строк файла?
tail -n 25 имя_файла

3. Создайте пользователя sshuser, Пароль пользователя sshuser с паролем P@ssw0rd, sshuser должен иметь возможность запускать sudo без дополнительной аутентификации.
useradd sshuser -u 1010 -U
passwd sshuser dayn
usermod -aG sudo sshuser
echo "sshuser ALL=NOPASSWD: ALL" >> /etc/sudoers
EOF

# === Конец билетов ===

# === Логика скрипта ===

echo "Введите номер билета от 1 до 20:"
read ticket_num

case $ticket_num in
    1) echo "$BILET_1" > "билет_$ticket_num.txt" ;;
    2) echo "$BILET_2" > "билет_$ticket_num.txt" ;;
    3) echo "$BILET_3" > "билет_$ticket_num.txt" ;;
    # ... продолжение для 4-20
    20) echo "$BILET_20" > "билет_$ticket_num.txt" ;;
    *)
        echo "Ошибка: Введите число от 1 до 20."
        exit 1
esac

echo "Билет №$ticket_num сохранён в файл: билет_$ticket_num.txt"
